server {
    listen 8080;
    server_name _;

    #######################################################
    # ü©µ Health-check –¥–ª—è Render
    #######################################################
    location / {
        return 200 "Render proxy alive!\n";
        add_header Content-Type text/plain;
    }

    #######################################################
    # üá∫üá∏ –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ /render ‚Üí 152.44.38.209:2098 (Xray WS+TLS)
    #######################################################
    location /render {
        proxy_pass https://backend1;                # TLS-–≤–∫–ª—é—á–µ–Ω–æ –¥–ª—è Xray
        proxy_http_version 1.1;

        # --- TLS + SNI ---
        proxy_ssl_server_name on;                   # –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –∏–º—è —Å–µ—Ä–≤–µ—Ä–∞ (SNI)
        proxy_ssl_name onrender.com;                # —Å–æ–≤–ø–∞–¥–∞–µ—Ç —Å Xray -> "serverName"
        proxy_ssl_verify off;                       # –æ—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (—Å–∞–º–æ–ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–π)

        # --- WebSocket Upgrade ---
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
        proxy_set_header Host onrender.com;

        # --- –¢–∞–π–º–∞—É—Ç—ã ---
        proxy_read_timeout 86400;
        proxy_send_timeout 86400;
    }
}
