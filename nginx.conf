server {
    # Render —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ HTTP/2 ‚Äî –≤–∫–ª—é—á–∞–µ–º –ø–æ–¥–¥–µ—Ä–∂–∫—É
    listen 8080 http2;
    server_name _;

    #######################################################
    # ü©µ Health-check –¥–ª—è Render
    #######################################################
    location / {
        return 200 "Render proxy alive!\n";
        add_header Content-Type text/plain;
    }

    #######################################################
    # üá∫üá∏ –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ /render ‚Üí 152.44.38.209:2098 (Xray WS+TLS)
    #######################################################
    location /render {
        # –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —É–∫–∞–∑—ã–≤–∞–µ–º —Ç–æ—Ç –∂–µ path, —á—Ç–æ –≤ Xray ("path": "/render")
        proxy_pass https://backend1/render;

        proxy_http_version 1.1;

        # SNI –∏ Host
        proxy_set_header Host onrender.com;
        proxy_ssl_server_name on;
        proxy_ssl_name onrender.com;
        proxy_ssl_verify off;

        # –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏ –¥–ª—è WebSocket
        proxy_set_header Upgrade "websocket";
        proxy_set_header Connection "Upgrade";

        # –¢–∞–π–º–∞—É—Ç—ã
        proxy_read_timeout 86400s;
        proxy_send_timeout 86400s;

        # –õ–æ–≥–∏
        access_log /var/log/nginx/access.log;
        error_log  /var/log/nginx/error.log debug;
    }
}
