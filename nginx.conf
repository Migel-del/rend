server {
    listen 8080;
    server_name _;

    #######################################################
    # ü©µ Health-check –¥–ª—è Render
    #######################################################
    location / {
        return 200 "Render proxy alive!\n";
        add_header Content-Type text/plain;
    }

    #######################################################
    # üá∫üá∏ –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ /render ‚Üí 152.44.38.209:2098 (Xray WS+TLS)
    #######################################################
    location /render {
        proxy_pass https://backend1;
    
        proxy_http_version 1.1;
        proxy_set_header Host onrender.com;
    
        # WebSocket
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection $connection_upgrade;
    
        # –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ SNI –ø—Ä–∏ TLS handshake
        proxy_ssl_server_name on;
        proxy_ssl_name onrender.com;
    
        # –û—Ç–∫–ª—é—á–∞–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–∞ (—É Render –≤—Å–µ–≥–¥–∞ *.onrender.com)
        proxy_ssl_verify off;
    
        # –¢–∞–π–º–∞—É—Ç—ã
        proxy_read_timeout 86400s;
        proxy_send_timeout 86400s;
    }
}
